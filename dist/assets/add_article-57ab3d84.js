import{a as p,b as _,r as b,c,B as g,o as w,e as k,f as l,m as a}from"./index-a4dd1763.js";import"./style-8efb08d7.js";import{h as y}from"./article_api-4091d731.js";import{_ as S}from"./gvb_article_modal-33e49817.js";import{_ as O}from"./gvb_editor-d2eaa99c.js";import"./tag_api-36863e89.js";import"./image_api-c8b8668a.js";const L={__name:"add_article",setup(B){const u=p(),m=_(),r=b(!1);async function d(t){Object.assign(n,t);let e=await y(n);if(e.code){a.error(e.msg);return}a.success(e.msg),r.value=!0,Object.assign(n,f),u.push({name:"article_list"}),m.removeTab({name:"add_article"})}const f=c({content:"",title:"",abstract:"",banner_id:null,category:"",link:"",source:"",tags:[]}),n=c({content:"",title:"",abstract:"",banner_id:null,category:"",link:"",source:"",tags:[]});function s(t){t.ctrlKey&&t.code=="KeyS"&&(i(),t.preventDefault())}function i(){if(n.content.trim()===""){a.error("文章内容不可为空");return}r.value=!0}window.addEventListener("keydown",s),g(()=>{window.removeEventListener("keydown",s)});const v=(t,e)=>{i()};return(t,e)=>(w(),k("div",null,[l(S,{visible:r.value,"onUpdate:visible":e[0]||(e[0]=o=>r.value=o),onOk:d},null,8,["visible"]),l(O,{content:n.content,"onUpdate:content":e[1]||(e[1]=o=>n.content=o),onOnSave:v},null,8,["content"])]))}};export{L as default};
