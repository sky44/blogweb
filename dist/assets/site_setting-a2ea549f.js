import{b as C,r as g,a1 as k,c as j,d as i,o as x,e as I,g as n,f as l,w as r,a2 as M,m,a3 as R,l as w,h as S}from"./index-a4dd1763.js";import{g as B}from"./date-d051bfca.js";const N={class:"gvb_settings_box"},V=n("div",{class:"gvb_settings_head"}," 网站配置 ",-1),A={class:"gvb_setting_body"},L=["src"],E=["src"],F=n("div",{class:"gvb_settings_head"}," 个人信息 ",-1),O={class:"gvb_setting_body"},T=n("div",{class:"gvb_settings_head"}," 链接信息 ",-1),z={class:"gvb_setting_body"},G={class:"gb_settings_btn"},P={__name:"site_setting",setup(H){const b=C(),d=g(k("2023-06-06","YYYY-MM-DD")),f=g(null),p=g(null),v=g(null);function c(o,a){if(o.file.status==="done"){let s=o.file.response;if(s.code){m.error(s.error);return}m.success(s.msg),a==="qq"&&(e.qq_image=s.data),a==="wechat"&&(e.wechat_image=s.data)}}const e=j({title:"",slogan:"",slogan_en:"",bei_an:"",version:"1.0.0",created_at:"",qq_image:"",wechat_image:"",name:"",job:"",addr:"",email:"",web:"",bilibili_url:"",gitee_url:"",github_url:""});async function y(){e.created_at=B(d.value.toDate());let o=await M(e);if(o.code){m.error(o.msg);return}m.success(o.msg)}async function U(){let o=await R();Object.assign(e,o.data),d.value=k(o.data.created_at,"YYYY-MM-DD");try{await f.value.validate(),await p.value.validate(),await v.value.validate()}catch{return}}return U(),(o,a)=>{const s=i("a-input"),u=i("a-form-item"),D=i("a-date-picker"),h=i("a-upload"),q=i("a-form-item-rest"),_=i("a-form"),Y=i("a-button");return x(),I("div",N,[V,n("div",A,[l(_,{model:e,name:"basic",ref_key:"formSiteRef",ref:f,"label-align":"left","label-col":{span:3},"wrapper-col":{span:21},autocomplete:"off"},{default:r(()=>[l(u,{label:"网站标题",name:"title","has-feedback":"",rules:[{required:!0,message:"请输入网站标题",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.title,"onUpdate:value":a[0]||(a[0]=t=>e.title=t),placeholder:"网站标题"},null,8,["value"])]),_:1}),l(u,{label:"slogan",name:"slogan","has-feedback":"",rules:[{required:!0,message:"请输入slogan",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.slogan,"onUpdate:value":a[1]||(a[1]=t=>e.slogan=t),placeholder:"slogan"},null,8,["value"])]),_:1}),l(u,{label:"英文slogan",name:"slogan_en","has-feedback":"",rules:[{required:!0,message:"请输入英文slogan",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.slogan_en,"onUpdate:value":a[2]||(a[2]=t=>e.slogan_en=t),placeholder:"英文slogan"},null,8,["value"])]),_:1}),l(u,{label:"备案",name:"bei_an","has-feedback":"",rules:[{required:!0,message:"请输入备案",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.bei_an,"onUpdate:value":a[3]||(a[3]=t=>e.bei_an=t),placeholder:"备案"},null,8,["value"])]),_:1}),l(u,{label:"网站版本",name:"version","has-feedback":"",rules:[{required:!0,message:"请输入网站版本",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.version,"onUpdate:value":a[4]||(a[4]=t=>e.version=t),placeholder:"网站版本"},null,8,["value"])]),_:1}),l(u,{label:"建站日期","has-feedback":""},{default:r(()=>[l(D,{value:d.value,"onUpdate:value":a[5]||(a[5]=t=>d.value=t),placeholder:"建站日期",allowClear:""},null,8,["value"])]),_:1}),l(u,{label:"qq",name:"qq_image","has-feedback":"",rules:[{required:!0,message:"请输入qq地址",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.qq_image,"onUpdate:value":a[6]||(a[6]=t=>e.qq_image=t),placeholder:"qq"},null,8,["value"]),l(q,null,{default:r(()=>[l(h,{name:"image","list-type":"picture-card",class:"gvb_img_upload","show-upload-list":!1,action:"/api/image",headers:{token:w(b).userInfo.token},onChange:a[7]||(a[7]=t=>c(t,"qq"))},{default:r(()=>[n("img",{src:e.qq_image,width:"90",height:"90",style:{cursor:"pointer"},alt:""},null,8,L)]),_:1},8,["headers"])]),_:1})]),_:1}),l(u,{label:"wechat",name:"wechat_image","has-feedback":"",rules:[{required:!0,message:"请输入wechat图片地址",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.wechat_image,"onUpdate:value":a[8]||(a[8]=t=>e.wechat_image=t),placeholder:"wechat"},null,8,["value"]),l(q,null,{default:r(()=>[l(h,{name:"image","list-type":"picture-card",class:"gvb_img_upload","show-upload-list":!1,action:"/api/image",headers:{token:w(b).userInfo.token},onChange:a[9]||(a[9]=t=>c(t,"wechat"))},{default:r(()=>[n("img",{src:e.wechat_image,width:"90",height:"90",style:{cursor:"pointer"},alt:""},null,8,E)]),_:1},8,["headers"])]),_:1})]),_:1})]),_:1},8,["model"])]),F,n("div",O,[l(_,{model:e,name:"basic",ref_key:"formMyInfoRef",ref:p,"label-align":"left","label-col":{span:3},"wrapper-col":{span:21},autocomplete:"off"},{default:r(()=>[l(u,{label:"昵称",name:"name","has-feedback":"",rules:[{required:!0,message:"请输入昵称",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.name,"onUpdate:value":a[10]||(a[10]=t=>e.name=t),placeholder:"昵称"},null,8,["value"])]),_:1}),l(u,{label:"工作",name:"job","has-feedback":"",rules:[{required:!0,message:"请输入工作",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.job,"onUpdate:value":a[11]||(a[11]=t=>e.job=t),placeholder:"工作"},null,8,["value"])]),_:1}),l(u,{label:"地址",name:"addr","has-feedback":"",rules:[{required:!0,message:"请输入地址",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.addr,"onUpdate:value":a[12]||(a[12]=t=>e.addr=t),placeholder:"地址"},null,8,["value"])]),_:1}),l(u,{label:"邮箱",name:"email","has-feedback":"",rules:[{required:!0,message:"请输入邮箱",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.email,"onUpdate:value":a[13]||(a[13]=t=>e.email=t),placeholder:"邮箱"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),T,n("div",z,[l(_,{model:e,name:"basic",ref_key:"formLinkRef",ref:v,"label-align":"left","label-col":{span:3},"wrapper-col":{span:21},autocomplete:"off"},{default:r(()=>[l(u,{label:"网站地址",name:"web","has-feedback":"",rules:[{required:!0,message:"请输入网站地址",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.web,"onUpdate:value":a[14]||(a[14]=t=>e.web=t),placeholder:"网站地址"},null,8,["value"])]),_:1}),l(u,{label:"哔哩哔哩",name:"bilibili_url","has-feedback":"",rules:[{required:!0,message:"请输入哔哩哔哩",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.bilibili_url,"onUpdate:value":a[15]||(a[15]=t=>e.bilibili_url=t),placeholder:"哔哩哔哩"},null,8,["value"])]),_:1}),l(u,{label:"gitee",name:"gitee_url","has-feedback":"",rules:[{required:!0,message:"请输入gitee",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.gitee_url,"onUpdate:value":a[16]||(a[16]=t=>e.gitee_url=t),placeholder:"gitee"},null,8,["value"])]),_:1}),l(u,{label:"github",name:"github_url","has-feedback":"",rules:[{required:!0,message:"请输入github",trigger:"blur"}]},{default:r(()=>[l(s,{value:e.github_url,"onUpdate:value":a[17]||(a[17]=t=>e.github_url=t),placeholder:"github"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),n("div",G,[l(Y,{type:"primary",onClick:y},{default:r(()=>[S("修改信息")]),_:1})])])}}};export{P as default};
