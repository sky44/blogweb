import{_ as C,a as L}from"./gvb_user_info-c13ee589.js";import{r as N,c as f,d as g,o as t,e as o,f as c,w as m,g as e,F as x,k as $,t as u,j as y,m as S,b as T,i as b,h as w,l as p,p as V}from"./index-60e5bf44.js";import{s as D}from"./article_api-61275ba2.js";const E={class:"search_text_head"},F={class:"search_text_body"},I=["onClick"],M={class:"search_title"},z=["innerHTML"],A={key:0,class:"search_text_footer"},H={__name:"gvb_text_search",setup(k){const i=N(!1),s=f({list:[],total:0}),a=f({key:"",limit:10,page:1});function h(){i.value=!0}function v(n){window.open("/article/"+n,"_blank")}async function d(){let n=await D(a);if(n.code){S.error(n.msg);return}s.list=n.data.list,s.total=n.data.count,console.log(s.list)}return(n,r)=>{const l=g("a-input-search"),B=g("a-modal");return t(),o("div",null,[c(B,{title:"全文搜索",visible:i.value,"onUpdate:visible":r[1]||(r[1]=_=>i.value=_),class:"search_modal",footer:null,width:"40%"},{default:m(()=>[e("div",E,[c(l,{value:a.key,"onUpdate:value":r[0]||(r[0]=_=>a.key=_),placeholder:"输入搜索内容","enter-button":"",size:"large",onSearch:d},null,8,["value"])]),e("div",F,[(t(!0),o(x,null,$(s.list,_=>(t(),o("div",{class:"item",onClick:O=>v(_.slug),key:_.id},[e("div",M,u(_.title),1),e("div",{class:"search_text",innerHTML:_.body},null,8,z)],8,I))),128))]),s.list.length?(t(),o("div",A," 共搜索到结果 "+u(s.total)+" 条",1)):y("",!0)]),_:1},8,["visible"]),e("i",{class:"fa fa-search",onClick:h})])}}};const U={class:"gvb_nav_container"},j=e("div",{class:"logo"},[e("div",null,"BoBo"),e("div",null,"DeepDarkFantasy")],-1),q={class:"left"},W=["href"],G={class:"search"},J={class:"right"},K={key:0,class:"login_btn"},X={__name:"gvb_nav",props:{is_show:{type:Boolean,default:!1}},setup(k){const i=k,s=T(),a=f({is_show:!1});async function h(){i.is_show?a.is_show=!0:window.addEventListener("scroll",v)}h();function v(){document.documentElement.scrollTop>=400?a.is_show=!0:a.is_show=!1}return(d,n)=>{const r=g("router-link");return t(),o("div",{class:V({gvb_nav:!0,show:a.is_show})},[e("div",U,[j,e("div",q,[(t(!0),o(x,null,$(p(s).navList,l=>(t(),o("span",{key:l.id},[l.path.startsWith("http")?(t(),o("a",{key:0,href:l.path,target:"_blank"},u(l.title),9,W)):(t(),b(r,{key:1,to:l.path},{default:m(()=>[w(u(l.title),1)]),_:2},1032,["to"]))]))),128)),e("span",G,[c(H)])]),e("div",J,[c(C,{class:"gvb_theme"}),p(s).userInfo.role===0?(t(),o("span",K,[c(r,{to:{name:"login",query:{redirect_url:d.$route.path}}},{default:m(()=>[w("登录")]),_:1},8,["to"])])):y("",!0),p(s).userInfo.role!==0?(t(),b(L,{key:1})):y("",!0)])])],2)}}};export{X as _};
