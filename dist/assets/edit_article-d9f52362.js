import{u as l,b as m,a as p,r as d,o as f,e as _,f as v,m as n}from"./index-60e5bf44.js";import{_ as g}from"./gvb_editor-bda67067.js";import{i as A,u as y}from"./article_api-61275ba2.js";import"./style-940bdc65.js";import"./image_api-bab7cfc5.js";const R={__name:"edit_article",setup(S){const a=l(),o=m(),s=p(),t=d("");async function u(){let e=await A(a.params.id);t.value=e.data}u();async function i(){if(t.value.trim()===""){n.error("文章内容不能为空");return}let e=await y(a.params.id,{content:t.value});if(e.code){n.error(e.msg);return}n.success(e.msg);let r=a.query.redirect_url;r===void 0?s.push({name:"article_list"}):s.push(r),o.removeTab({name:"edit_article"})}return(e,r)=>(f(),_("div",null,[v(g,{content:t.value,"onUpdate:content":r[0]||(r[0]=c=>t.value=c),onOnSave:i},null,8,["content"])]))}};export{R as default};
